"use strict";var gtm4wp_last_selected_product_variation;function gtm4wp_woocommerce_handle_cart_qty_change(){document.querySelectorAll(".product-quantity input.qty").forEach(function(a){var c=a.defaultValue,b=parseInt(a.value);if(c!=(b=isNaN(b)?c:b))if(a=a.closest(".cart_item"),a=a&&a.querySelector(".remove"),a)return!(a=gtm4wp_read_json_from_node(a,"gtm4wp_product_data"))||void(c<b?(a.quantity=b-c,a.price=a.price,gtm4wp_push_ecommerce("add_to_cart",[a],{currency:gtm4wp_currency,value:a.price*a.quantity})):(a.quantity=c-b,a.price=a.price,gtm4wp_push_ecommerce("remove_from_cart",[a],{currency:gtm4wp_currency,value:a.price*a.quantity})))})}function gtm4wp_woocommerce_handle_payment_method_change(){var a,b;-1<gtm4wp_checkout_step_fired.indexOf("payment_method")||"complete"==document.readyState&&(a="(payment type not found)",(b=(b=document.querySelector(".payment_methods input:checked"))||document.querySelector("input[name^=payment_method]"))&&(a=b.value),gtm4wp_push_ecommerce("add_payment_info",window.gtm4wp_checkout_products,{currency:gtm4wp_currency,payment_type:a,value:window.gtm4wp_checkout_value}),gtm4wp_checkout_step_fired.push("payment_method"))}function gtm4wp_woocommerce_handle_shipping_method_change(){var a,b;-1<gtm4wp_checkout_step_fired.indexOf("shipping_method")||"complete"==document.readyState&&(a="(shipping tier not found)",(b=(b=document.querySelector("input[name^=shipping_method]:checked"))||document.querySelector("input[name^=shipping_method]"))&&(a=b.value),gtm4wp_push_ecommerce("add_shipping_info",window.gtm4wp_checkout_products,{currency:gtm4wp_currency,shipping_tier:a,value:window.gtm4wp_checkout_value}),gtm4wp_checkout_step_fired.push("shipping_method"))}function gtm4wp_woocommerce_process_pages(){var b={"wp-block-handpicked-products":{displayname:"Handpicked Products",counter:1},"wp-block-product-best-sellers":{displayname:"Best Selling Products",counter:1},"wp-block-product-category":{displayname:"Product Category List",counter:1},"wp-block-product-new":{displayname:"New Products",counter:1},"wp-block-product-on-sale":{displayname:"Sale Products",counter:1},"wp-block-products-by-attribute":{displayname:"Products By Attribute",counter:1},"wp-block-product-tag":{displayname:"Products By Tag",counter:1},"wp-block-product-top-rated":{displayname:"Top Rated Products",counter:1}},d,c,e,f,a;if(document.querySelectorAll(".wc-block-grid .wc-block-grid__product").forEach(function(d){var e=d.closest(".wc-block-grid"),c=d.querySelector(".gtm4wp_productdata"),f,a;if(e&&c)if(f=e.classList,f)for(a in b)f.contains(a)&&(gtm4wp_update_json_in_node(c,"gtm4wp_product_data","item_list_name",b[a].displayname),gtm4wp_update_json_in_node(c,"gtm4wp_product_data","index",b[a].counter),b[a].counter++)}),0<document.querySelectorAll(".gtm4wp_productdata,.widget-product-item").length)if(c=[],document.querySelectorAll(".gtm4wp_productdata,.widget-product-item").forEach(function(a){if(a=gtm4wp_read_json_from_node(a,"gtm4wp_product_data"),!a)return!0;c.push(a)}),0<gtm4wp_product_per_impression)for(;c.length;)d=c.splice(0,gtm4wp_product_per_impression),gtm4wp_push_ecommerce("view_item_list",d,{currency:gtm4wp_currency});else gtm4wp_push_ecommerce("view_item_list",c,{currency:gtm4wp_currency});document.addEventListener("click",function(f){var d=f.target,a,b,c,g,i,e,h,j,k,l,m;if(!d)return!0;if(d.closest(".add_to_cart_button:not(.product_type_variable, .product_type_grouped, .single_add_to_cart_button)")){if(a=d.closest(".product,.wc-block-grid__product"),a=a&&a.querySelector(".gtm4wp_productdata"),!a)return!0;if(a=gtm4wp_read_json_from_node(a,"gtm4wp_product_data"),!a)return!0;if("variable"===a.product_type||"grouped"===a.product_type)return!0;a.productlink&&delete a.productlink,delete a.product_type,a.quantity=1,gtm4wp_push_ecommerce("add_to_cart",[a],{currency:gtm4wp_currency,value:a.price})}if(d.closest(".single_add_to_cart_button:not(.disabled)")){if(a=d.closest("form.cart"),!a)return!0;if(b=a.querySelectorAll("[name=variation_id]"),c=a.classList&&a.classList.contains("grouped_form"),0<b.length)gtm4wp_last_selected_product_variation&&(b=a.querySelector("[name=quantity]"),gtm4wp_last_selected_product_variation.quantity=b&&b.value||1,gtm4wp_push_ecommerce("add_to_cart",[gtm4wp_last_selected_product_variation],{currency:gtm4wp_currency,value:(gtm4wp_last_selected_product_variation.price*gtm4wp_last_selected_product_variation.quantity).toFixed(2)}));else if(c){if(b=document.querySelectorAll(".grouped_form .gtm4wp_productdata"),g=[],i=0,b.forEach(function(a){var b,a=gtm4wp_read_json_from_node(a,"gtm4wp_product_data",["productlink"]);return!(a&&0<(b=document.querySelectorAll("input[name=quantity\\["+a.internal_id+"\\]]")).length&&0!=(product_qty=b[0]&&b[0].value||1))||(a.quantity=product_qty,delete a.internal_id,g.push(a),void(i+=a.price*a.quantity))}),0==g.length)return!0;gtm4wp_push_ecommerce("add_to_cart",g,{currency:gtm4wp_currency,value:i.toFixed(2)})}else{if(c=a.querySelector("[name=gtm4wp_product_data]"),!c)return!0;b=gtm4wp_read_from_json(c.value),b.quantity=a.querySelector("[name=quantity]")&&a.querySelector("[name=quantity]").value,isNaN(b.quantity)&&(b.quantity=1),gtm4wp_push_ecommerce("add_to_cart",[b],{currency:gtm4wp_currency,value:b.price*b.quantity})}}if(d.closest(".mini_cart_item a.remove,.product-remove a.remove")){if(c=d&&d.closest(".mini_cart_item a.remove,.product-remove a.remove"),!c)return!0;if(a=gtm4wp_read_json_from_node(c,"gtm4wp_product_data"),!a)return!0;if(b=0,e=c.closest(".cart_item"),e=e&&e.querySelectorAll(".product-quantity input.qty"),e&&0!==e.length?b=e[0].value:(e=(c=c.closest(".mini_cart_item"))&&c.querySelectorAll(".quantity"))&&0<e.length&&(b=parseInt(e[0].textContent),Number.isNaN(b))&&(b=0),0===b)return!0;a.quantity=b,gtm4wp_push_ecommerce("remove_from_cart",[a],{currency:gtm4wp_currency,value:a.price*a.quantity})}if(d.closest(".products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.wc-block-grid__products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.products>div:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.widget-product-item,.woocommerce-grouped-product-list-item__label a")){if("undefined"==typeof google_tag_manager)return!0;if(c=f.target,e=c.closest(".products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.wc-block-grid__products li:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.products>div:not(.product-category) a:not(.add_to_cart_button):not(.quick-view-button),.widget-product-item,.woocommerce-grouped-product-list-item__label a"),!e)return!0;if(b=c.closest(".product,.wc-block-grid__product"),a=(b=(b=b||(b=c.closest(".products li"))||c.closest(".products>div"))||c.closest(".woocommerce-grouped-product-list-item__label"))?b.querySelector(".gtm4wp_productdata"):c,d=gtm4wp_read_json_from_node(a,"gtm4wp_product_data",["internal_id"]),!d)return!0;if(d.productlink!=e.getAttribute("href"))return!0;for(h in window.google_tag_manager)if("gtm-"==h.substring(0,4).toLowerCase()){window.gtm4wp_first_container_id=h;break}if(""===window.gtm4wp_first_container_id)return!0;j=f.ctrlKey||f.metaKey,k="_blank"===e.target,l=f.defaultPrevented,m=(l||f.preventDefault(),(j||k)&&(window.productpage_window=window.open("about:blank","_blank")),d.productlink),delete d.productlink,gtm4wp_push_ecommerce("select_item",[d],{currency:gtm4wp_currency},function(a){if(void 0!==a&&window.gtm4wp_first_container_id!=a)return!0;l||((k||j)&&productpage_window?productpage_window.location.href=m:document.location.href=m)})}}),jQuery(document).on("found_variation",function(c,b){var a,d,e;if(void 0!==b&&("interactive"!==document.readyState||!gtm4wp_view_item_fired_during_pageload)){if(c=c.target,!c)return!0;if(c=c.querySelector("[name=gtm4wp_product_data]"),!c)return!0;try{a=JSON.parse(c.value)}catch(a){return console&&console.error&&console.error(a.message),!0}a.price=gtm4wp_make_sure_is_float(a.price),a.id=b.variation_id,a.item_id=b.variation_id,a.sku=b.sku,gtm4wp_use_sku_instead&&b.sku&&""!==b.sku&&(a.id=b.sku,a.item_id=b.sku),a.price=gtm4wp_make_sure_is_float(b.display_price),e=[];for(d in b.attributes)e.push(b.attributes[d]);a.variant=e.join(","),gtm4wp_last_selected_product_variation=a,gtm4wp_push_ecommerce("view_item",[a],{currency:gtm4wp_currency,value:a.price}),"interactive"===document.readyState&&(gtm4wp_view_item_fired_during_pageload=!0)}}),jQuery(".variations select").trigger("change"),jQuery(document).ajaxSuccess(function(b,c,a){void 0!==a&&-1<a.url.indexOf("wc-api=WC_Quick_View")&&setTimeout(function(){var a=document.querySelector("#gtm4wp_quickview_data"),b;if(a&&a.dataset&&a.dataset.gtm4wp_datalayer)try{b=JSON.parse(a.dataset.gtm4wp_datalayer),b&&window.dataLayer&&window.dataLayer.push(b)}catch(a){console&&console.error&&console.error(a.message)}},500)}),e=!1,f=!1,a=document.querySelector("body"),a&&(e=a.classList&&a.classList.contains("woocommerce-cart"),f=a.classList&&a.classList.contains("woocommerce-checkout")),e&&(document.addEventListener("click",function(a){return a=a.target,!a||!a.closest("[name=update_cart]")||void gtm4wp_woocommerce_handle_cart_qty_change()}),document.addEventListener("keypress",function(a){return a=a.target,!a||!a.closest(".woocommerce-cart-form input[type=number]")||void gtm4wp_woocommerce_handle_cart_qty_change()})),f&&(window.gtm4wp_checkout_value=window.gtm4wp_checkout_value||0,window.gtm4wp_checkout_products=window.gtm4wp_checkout_products||[],window.gtm4wp_checkout_products_ga4=window.gtm4wp_checkout_products_ga4||[],document.addEventListener("change",function(a){return a=a.target,!a||!a.closest("input[name^=shipping_method]")||void gtm4wp_woocommerce_handle_shipping_method_change()}),document.addEventListener("change",function(a){return a=a.target,!a||!a.closest("input[name=payment_method]")||void gtm4wp_woocommerce_handle_payment_method_change()}),jQuery("form.checkout").on("checkout_place_order",function(){-1==gtm4wp_checkout_step_fired.indexOf("shipping_method")&&gtm4wp_woocommerce_handle_shipping_method_change(),-1==gtm4wp_checkout_step_fired.indexOf("payment_method")&&gtm4wp_woocommerce_handle_payment_method_change()}))}function gtm4wp_woocommerce_page_loading_completed(){document.removeEventListener("DOMContentLoaded",gtm4wp_woocommerce_page_loading_completed),window.removeEventListener("load",gtm4wp_woocommerce_page_loading_completed),gtm4wp_woocommerce_process_pages()}window.gtm4wp_view_item_fired_during_pageload=!1,window.gtm4wp_checkout_step_fired=[],window.gtm4wp_first_container_id="","loading"!==document.readyState?window.setTimeout(gtm4wp_woocommerce_process_pages):(document.addEventListener("DOMContentLoaded",gtm4wp_woocommerce_page_loading_completed),window.addEventListener("load",gtm4wp_woocommerce_page_loading_completed))